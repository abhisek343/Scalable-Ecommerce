{
    "info": {
        "_postman_id": "ecommerce-api-collection",
        "name": "E-Commerce Backend API",
        "description": "Complete API collection for testing the Scalable E-Commerce Backend.\n\n## Quick Start\n1. Import this collection into Postman\n2. Set the `base_url` variable to your deployed API URL\n3. Run 'Register User' first to get a JWT token\n4. The token will be automatically saved for all subsequent requests\n\n## Test Flow\n1. Register/Login ‚Üí Get JWT Token\n2. Create Products\n3. Add to Cart\n4. Place Order\n5. Process Payment",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "variable": [
        {
            "key": "base_url",
            "value": "http://localhost:80",
            "type": "string"
        },
        {
            "key": "jwt_token",
            "value": "",
            "type": "string"
        },
        {
            "key": "user_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "product_id",
            "value": "",
            "type": "string"
        },
        {
            "key": "order_id",
            "value": "",
            "type": "string"
        }
    ],
    "item": [
        {
            "name": "üîê Authentication",
            "item": [
                {
                    "name": "1. Register User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 201 || pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    if (jsonData.token) {",
                                    "        pm.collectionVariables.set('jwt_token', jsonData.token);",
                                    "        // Decode JWT to get user ID",
                                    "        var payload = JSON.parse(atob(jsonData.token.split('.')[1]));",
                                    "        pm.collectionVariables.set('user_id', payload.userId || payload.id);",
                                    "        console.log('Token saved! User ID:', payload.userId || payload.id);",
                                    "    }",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"HR Tester\",\n    \"email\": \"hr.tester@company.com\",\n    \"password\": \"SecurePass123!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/users/register",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "users",
                                "register"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "2. Login User",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 200) {",
                                    "    var jsonData = pm.response.json();",
                                    "    if (jsonData.token) {",
                                    "        pm.collectionVariables.set('jwt_token', jsonData.token);",
                                    "        var payload = JSON.parse(atob(jsonData.token.split('.')[1]));",
                                    "        pm.collectionVariables.set('user_id', payload.userId || payload.id);",
                                    "        console.log('Login successful! Token updated.');",
                                    "    }",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"hr.tester@company.com\",\n    \"password\": \"SecurePass123!\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/users/login",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "users",
                                "login"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get User Profile",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/users/profile",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "users",
                                "profile"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "üì¶ Products",
            "item": [
                {
                    "name": "Create Product",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 201) {",
                                    "    var jsonData = pm.response.json();",
                                    "    if (jsonData._id) {",
                                    "        pm.collectionVariables.set('product_id', jsonData._id);",
                                    "        console.log('Product created! ID:', jsonData._id);",
                                    "    }",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Premium Wireless Headphones\",\n    \"description\": \"High-quality noise-cancelling headphones with 30-hour battery life\",\n    \"price\": 299.99,\n    \"category\": \"Electronics\",\n    \"stock\": 50\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/products/create",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "products",
                                "create"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get All Products",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/products/",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "products",
                                ""
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Product by ID",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/products/{{product_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "products",
                                "{{product_id}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Product",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"price\": 249.99,\n    \"stock\": 75\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/products/{{product_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "products",
                                "{{product_id}}"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "üõí Shopping Cart",
            "item": [
                {
                    "name": "Add Item to Cart",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"productId\": \"{{product_id}}\",\n    \"quantity\": 2\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/cart/{{user_id}}/add",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "cart",
                                "{{user_id}}",
                                "add"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Cart",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/cart/{{user_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "cart",
                                "{{user_id}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Cart Item Quantity",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"quantity\": 3\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/cart/{{user_id}}/update/{{product_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "cart",
                                "{{user_id}}",
                                "update",
                                "{{product_id}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Remove Item from Cart",
                    "request": {
                        "method": "DELETE",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/cart/{{user_id}}/remove/{{product_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "cart",
                                "{{user_id}}",
                                "remove",
                                "{{product_id}}"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "üìã Orders",
            "item": [
                {
                    "name": "Place Order",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "if (pm.response.code === 201) {",
                                    "    var jsonData = pm.response.json();",
                                    "    if (jsonData._id) {",
                                    "        pm.collectionVariables.set('order_id', jsonData._id);",
                                    "        console.log('Order placed! ID:', jsonData._id);",
                                    "    }",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/orders/{{user_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "orders",
                                "{{user_id}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get User Orders",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/orders/{{user_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "orders",
                                "{{user_id}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Order Details",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "url": {
                            "raw": "{{base_url}}/api/orders/{{user_id}}/{{order_id}}",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "orders",
                                "{{user_id}}",
                                "{{order_id}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Order Status",
                    "request": {
                        "method": "PUT",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"status\": \"Shipped\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/orders/{{order_id}}/status",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "orders",
                                "{{order_id}}",
                                "status"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "üí≥ Payments",
            "item": [
                {
                    "name": "Create Razorpay Order",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"amount\": 29999,\n    \"currency\": \"INR\",\n    \"receipt\": \"order_{{order_id}}\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/payments/create-order",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "payments",
                                "create-order"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Verify Payment",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            },
                            {
                                "key": "Authorization",
                                "value": "Bearer {{jwt_token}}"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"razorpay_order_id\": \"order_xxxxxxxxxx\",\n    \"razorpay_payment_id\": \"pay_xxxxxxxxxx\",\n    \"razorpay_signature\": \"signature_hash\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/payments/verify",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "payments",
                                "verify"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "üîî Notifications",
            "item": [
                {
                    "name": "Send Email",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"to\": \"recipient@example.com\",\n    \"subject\": \"Test Email from E-Commerce API\",\n    \"text\": \"This is a test email to verify the notification service works correctly.\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/notification/email",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "notification",
                                "email"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Send SMS",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"to\": \"+919876543210\",\n    \"body\": \"Test SMS from E-Commerce API\"\n}"
                        },
                        "url": {
                            "raw": "{{base_url}}/api/notification/sms",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "notification",
                                "sms"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "‚ù§Ô∏è Health Checks",
            "item": [
                {
                    "name": "User Service Health",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/users/health",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "users",
                                "health"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Product Service Health",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/products/health",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "products",
                                "health"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Cart Service Health",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/cart/health",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "cart",
                                "health"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Order Service Health",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{base_url}}/api/orders/health",
                            "host": [
                                "{{base_url}}"
                            ],
                            "path": [
                                "api",
                                "orders",
                                "health"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        }
    ]
}